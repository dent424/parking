<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hotel Selection Experiment</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; margin: 0; padding: 20px; }
        #hotel-list { list-style-type: none; padding: 0; }
        #hotel-list li { margin-bottom: 10px; }
        #hotel-details { display: none; }
        button { margin-top: 20px; }
        .more-details { margin-left: 10px; color: blue; text-decoration: underline; cursor: pointer; }
        .hotel-radio { margin-right: 10px; }
        .hotel-image { max-width: 100%; height: auto; margin-bottom: 20px; }
        .back-link { display: inline-block; margin-bottom: 20px; color: blue; text-decoration: underline; cursor: pointer; }
    </style>
</head>
<body>
    <div id="main-page">
        <h1>Select a Hotel</h1>
        <ul id="hotel-list"></ul>
        <button id="confirm-selection" style="display: none;">Confirm Selection</button>
    </div>
    
    <div id="hotel-details">
        <a id="back-to-main" class="back-link">Back to Main Page</a>
        <h2 id="hotel-name"></h2>
        <img id="hotel-image" class="hotel-image" alt="Hotel Image">
    </div>

    <script>
        // Ensure the script runs after the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', () => {
            console.log("DOM fully loaded and parsed");
            try {
                // Hotel data
                const hotels = [
                    { 
                        name: "Radisson Blu Hotel, Marseille Vieux Port", 
                        imageUrl: "https://live.staticflickr.com/65535/53958757296_a76e40482a_b.jpg"
                    },
                    { 
                        name: "Odalys City Marseille Prado Castellane", 
                        imageUrl: "https://live.staticflickr.com/65535/53958757261_67b1721972_b.jpg"
                    },
                    { 
                        name: "NH Collection Marseille", 
                        imageUrl: "https://live.staticflickr.com/65535/53958757291_9af5e65298_b.jpg"
                    },
                    { 
                        name: "New Hotel Le Quai - Vieux Port", 
                        imageUrl: "https://live.staticflickr.com/65535/53957861847_0bb5b81c93_b.jpg"
                    },
                    { 
                        name: "Maisons du Monde Hôtel & Suites - Marseille Vieux Port", 
                        imageUrl: "https://live.staticflickr.com/65535/53957861852_0cb5f4a449_b.jpg"
                    },
                    { 
                        name: "Les Jardins de Cassis", 
                        imageUrl: "https://live.staticflickr.com/65535/53959078024_e854e86399_b.jpg"
                    },
                    { 
                        name: "Le Devem de Mirapier", 
                        imageUrl: "https://live.staticflickr.com/65535/53959209905_d490dec6c0_b.jpg"
                    },
                    { 
                        name: "Hôtel la Résidence du Vieux Port", 
                        imageUrl: "https://live.staticflickr.com/65535/53957861802_27ba51894e_b.jpg"
                    },
                    { 
                        name: "Grand Hotel Beauvau Marseille Vieux-Port – MGallery", 
                        imageUrl: "https://live.staticflickr.com/65535/53959077944_8ab417c5a3_b.jpg"
                    },
                    { 
                        name: "Adira Résid'Marseille Vieux-Port", 
                        imageUrl: "https://live.staticflickr.com/65535/53959209785_a4c41c2b2a_b.jpg"
                    }
                ];

                let selectedHotel = null;

                // Initialize counters
                let totalClicks = 0;
                const uniqueClicks = new Set();

                // Initialize variable for TaskDuration
                const taskStartTime = Date.now();  // Record the start time

                // Capture the returnUrl from the URL parameters
                const urlParams = new URLSearchParams(window.location.search);
                const returnUrl = urlParams.get('returnUrl');

                console.log("Return URL:", returnUrl);

                // Function to display the list of hotels
                function displayHotels() {
                    const hotelList = document.getElementById('hotel-list');
                    if (!hotelList) {
                        console.error("hotel-list element not found");
                        return;
                    }
                    hotels.forEach((hotel, index) => {
                        const li = document.createElement('li');

                        // Add radio button for hotel selection
                        const radio = document.createElement('input');
                        radio.type = 'radio';
                        radio.name = 'hotel';
                        radio.value = index;
                        radio.id = `hotel-${index}`;
                        radio.className = 'hotel-radio';
                        radio.onchange = () => selectHotel(index);
                        
                        const label = document.createElement('label');
                        label.htmlFor = `hotel-${index}`;
                        label.textContent = hotel.name;

                        // Add "More Details" link
                        const moreDetailsLink = document.createElement('a');
                        moreDetailsLink.textContent = "More Details";
                        moreDetailsLink.className = "more-details";
                        moreDetailsLink.href = "#";
                        moreDetailsLink.onclick = (e) => {
                            e.preventDefault();
                            console.log(`"More Details" clicked for hotel index ${index}`);
                            // Increment total clicks
                            totalClicks++;
                            // Add to unique clicks
                            uniqueClicks.add(index);
                            showHotelDetails(index);
                        };

                        li.appendChild(radio);
                        li.appendChild(label);
                        li.appendChild(moreDetailsLink);
                        hotelList.appendChild(li);
                    });
                }

                // Function to handle hotel selection
                function selectHotel(index) {
                    selectedHotel = hotels[index];
                    const confirmButton = document.getElementById('confirm-selection');
                    if (confirmButton) {
                        confirmButton.style.display = 'block';
                        console.log(`Hotel selected: ${selectedHotel.name}`);
                    } else {
                        console.error("confirm-selection button not found");
                    }
                }

                // Function to display hotel details
                function showHotelDetails(index) {
                    selectedHotel = hotels[index];
                    const hotelName = document.getElementById('hotel-name');
                    const hotelImage = document.getElementById('hotel-image');
                    const mainPage = document.getElementById('main-page');
                    const hotelDetails = document.getElementById('hotel-details');

                    if (hotelName && hotelImage && mainPage && hotelDetails) {
                        hotelName.textContent = selectedHotel.name;
                        hotelImage.src = selectedHotel.imageUrl;
                        hotelImage.alt = selectedHotel.name;
                        mainPage.style.display = 'none';
                        hotelDetails.style.display = 'block';
                        console.log(`Displaying details for hotel: ${selectedHotel.name}`);
                    } else {
   
